{% extends 'grep/base.html' %}
{% load staticfiles grep_tags %}
{% block extrahead %}
    <link rel="stylesheet" type="text/css" href="{% static 'css/grep/grep.css' %}" />

{% endblock %}
{% block content %}
    <div id="grep-view" >
        <div class="panel-group col-lg-2" role="tablist" aria-multiselectable="true">
            {% dates_item "heading-dates" "collapse-dates" "dates" "Dates" object.index_dates|slice:":-1" %}
            {% columns_item "heading-columns" "collapse-columns" "columns" "Columns" column_names %}
            {% if filters %}
                {% for filter in filters %}
                    {% filter_item filter.heading_id filter.collapse_id filter.field filter.title filter.items %}
                {% endfor %}
            {% endif %}
        </div>

        <div id="log-list" class="col-lg-10">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <form id="search-form">
                        <div class="input-group">
                            <input type="text" class="form-control"
                                   name="search"
                                   id="search-text"
                                   placeholder="Search for...">
                  <span class="input-group-btn">
                    <input class="btn btn-default" type="submit" value="grep"
                           id="search-btn">
                  </span>
                        </div>
                    </form>
                </div>
            </div>
            <pre class="panel-body" id="log-container">
            </pre>
            <div class="progress">
                <div class="progress-bar progress-bar-striped active"
                     role="progressbar"
                     aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"
                     style="width: 100%">
                    <span class="sr-only">Loading</span>
                </div>
            </div>
        </div>
    </div>
    <div class="hidden">{% spaceless %}<script id="log-template" type="text/template">
        <span title="<%= datetime %>" class="column column-ts"><%= time %></span>
        {% for c in columns %}
            {% if c.name == 'host' %}
                <span title="<%= host %>" class="column column-toggle column-host"
                        <% if (columns && !_.contains(columns, '{{ c.name }}')) { %> style="display: none;"<% } %>
                        ><%- shortHost %></span>
            {% else %}
                <span title="{{ c.name }}" class="column column-toggle column-{{ c.name }}"
                        <% if (columns && !_.contains(columns, '{{ c.name }}')) { %> style="display: none;"<% } %>
                        ><%- {{ c.name }} %></span>
            {% endif %}
        {% endfor %}
        <span class="logline">
        <%= logline %></span></script>
    {% endspaceless %}</div>
{% endblock %}

{% block footer %}
    <script src="{% static 'js/grep/grep.js' %}"></script>
{% endblock %}